\chapter{Problem formulation}

This chapter gives a short overview of the RMDPEAT introduced in \cite{Hildebrandt2020_EAT} and then formulates the EAT component in detail. The RMDPEAT combines the dynamic meal pick-up and delivery problem presented in \cite{UlmerRMDP} with arrival time estimation and hence accounts for both processes.  
%The extension of the RMDP with EAT is important since customer preferences are taken into account. 
%For a detailed route-based Markov decision process-model of the RMDPEAT, the interested reader is referred to Â§A.1 in the Appendix.

\section{RMDPEAT} 

According to the Dynamic vehicle routing taxonomy introduced in \cite{psaraftis} which helps us to embed our problem into the broader context of dynamic vehicle routing problems, the classical RMDP belongs to the category of dynamic (1 )and stochastic (2) problems since (1) drivers routes need to be reoptimized over time by means of a routing policy and (2) only the probability distributions of inputs are known at the start of the problem respectively. In the RMDP, customers are distributed across a known service area and request service during a finite request time window. Drivers distributed in the service area are hired and dispatched by a meal delivery platform providing meal delivery service to participating restaurants. The RMDP process is triggered with the arrival of customer requests. When a customer requests service on the meal delivery platform , the dispatcher first assigns and then routes the drivers by means of an assignment respectively routing policy seeking maximization in the amount of served customers and minimization in delivery delays. Keep in mind that the routing procedure allows order bundling which is crucial for the latter two mentioned objectives. Order bundling refers to the possibility of assigning a vehicle more than one order at a time which results in greater flexibility in assignment and routing decisions.

The classical RMDP assumes that planned arrival times are the result of assumptions made by the dispatcher. In contrast to \citet{UlmerRMDP}, \citet{Hildebrandt2020_EAT} account for arrival time estimations in their problem by providing customers on the platform estimated arrival times for each listed restaurant. Based on them, customers then order either from a prefered restaurant or do not order at all.
  
A decision epoch $ k $ occurs whenever a customer requests arrival times. 
State $ S_k = (t_k, c_k, \mathcal{N}_k, \mathcal{R}_k, \Theta_k)$ contains the time point of the request $ t_k $, the set of customers $ \mathcal{N_k} $ that have requested service but have not been served yet, the restaurants and their workloads $ \mathcal{R}_k $ described by a location, the queue of requested meals to prepare and the preparation start time, and the set of planned routes $ \Theta_k $ given by a sequence of pickup and delivery actions which in turn are given by an origin, destination, the time when the pickup or delivery action is started and the duration of the action. 
A decision determines the set of planned routes $ \Theta_{ik} $ first and then estimates arrival times $ X_{ik} := X (S_k \cup \Theta_{ik}) \in \mathbb{R}$ for each restaurant $ i = 1, \dots, |\mathcal{R}_k| $.
Transition of state $ S_k $ to the state at the next decision epoch $ S_{k+1} $ is realized when a routing decision is made and the customer $ c_k $ makes his restaurant choice at $ t_k $. State transitions result in updated planned routes $ \Theta_{k+1} $ given by $ \Theta_k $ ex pickup and delivery actions carried out between $ t_k $ and $ t_{k+1} $. Following sources of uncertainty impact the RMDPEAT process: (1) Customers are unknown until they request service, (2) meal preparation times of restaurants, (3) parking and delivery times of drivers, and (4) the restaurant choice of customer $ c_k $ determined by an individual preference function $ \Phi_k((X_{ik})_{i \in \{1,\dots, R_k\}}) $ which receives a vector of corresponding arrival times for each restaurant as input, and returns the customers restaurant choice. Thus, the routing decision itself is uncertain due to (1), realization of pickup and delivery actions is uncertain due to (2) and (3), and restaurant workloads are uncertain due to (3) and (4). $ \mathcal{N}_{k+1} $ depends on all four sources of uncertainty and the routing decision.
Last but not least, the RMDP seeks to maximize the number of served customers within the service horizon and minimize delays of predicted arrival times wrt. actual arrival times. Latter is the focus of \cite{Hildebrandt2020_EAT} and therefore also the focus of this work. 
 
\section{Estimating arrival times for Restaurant Meal Delivery}

























































































    